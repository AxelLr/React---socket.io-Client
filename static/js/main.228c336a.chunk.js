(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{155:function(e,t){},159:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),o=a(81),l=a(22),i=a(33),u=a.n(i),m="SET_USER_CONNECTED",d="SET_USER_SOCKET",E="PUSH_NEW_MESSAGE",p="CONNECTED_USERS",v="ADMIN_MESSAGES",f="USER_DISCONNECTED",h="NEW_PRIVATE_CHAT",S="PUSH_NEW_PRIVATE_MESSAGE",C="SET_NOTIFICATIONS_AS_READED",y="CLOSE_CHAT",b=a(18),g=a(19),O=a(15);var j=function(e,t){switch(t.type){case m:return Object(O.a)({},e,{userConnected:t.payload});case d:return Object(O.a)({},e,{userConnectedSocket:t.payload});case E:return Object(O.a)({},e,{chatGeneral:[].concat(Object(g.a)(e.chatGeneral),[t.payload])});case p:return Object(O.a)({},e,{connectedUsers:Object(g.a)(t.payload)});case v:return Object(O.a)({},e,{chatGeneral:[].concat(Object(g.a)(e.chatGeneral),[t.payload])});case f:return Object(O.a)({},e,{userConnected:"",chatGeneral:[],userConnectedSocket:{},privateChats:[],privateMessages:[]});case h:var a=t.payload.id,n=e.privateChats.find((function(e){return e.id===a}));return e.privateChats=n?e.privateChats.filter((function(e){return e.id!==a})):[].concat(Object(g.a)(e.privateChats),[t.payload]),Object(O.a)({},e);case S:return Object(O.a)({},e,{privateMessages:[].concat(Object(g.a)(e.privateMessages),[t.payload])});case C:for(var r=0;r<e.privateMessages.length;r++)!1===e.privateMessages[r].readed&&e.privateMessages[r].sender===t.payload&&(e.privateMessages[r].readed=!0);return Object(O.a)({},e);case y:var c=t.payload.id;return e.privateChats=e.privateChats.filter((function(e){return e.id!==c})),Object(O.a)({},e);default:return e}},N=r.a.createContext(),_={userConnected:"",userConnectedSocket:{},connectedUsers:[],chatGeneral:[],privateChats:[],privateMessages:[]};var k=a(49),D=a.n(k),A=a(50),x=a.n(A),M=function(e){var t=Object(n.useContext)(N).State.userConnected,a=e.message,c=a.user,s=a.message,o=a.createdAt,l=e.message.sender;console.log(e.message);var i=!1;return c!==t&&l!==t||(i=!0),i?r.a.createElement("div",{className:"message-content"},r.a.createElement("div",{className:"moment-container"},r.a.createElement("span",null," ",x()(o).startOf("second").format("LT")," ")),r.a.createElement("div",null,r.a.createElement("p",null,D.a.emojify(s)))):r.a.createElement("div",{className:"message-content-u"},r.a.createElement("div",{className:"user-moment-container"},r.a.createElement("p",{className:"user-name"},c),r.a.createElement("span",null," ",x()(o).startOf("second").format("LT")," ")),r.a.createElement("div",null,r.a.createElement("p",null,D.a.emojify(s))))};function T(){var e=Object(n.useContext)(N),t=e.State,a=t.userConnectedSocket,c=t.chatGeneral,s=e.Dispatch;return Object(n.useEffect)((function(){a.on("NEW_MESSAGE",(function(e){var t=e.user,a=e.message,n=e.createdAt;s({type:E,payload:{user:t,message:a,createdAt:n}})}))}),[a,s]),r.a.createElement(u.a,{className:"messages-container"},c.map((function(e,t){return"string"===typeof e?r.a.createElement("p",{key:t}," ",e," "):r.a.createElement(M,{key:t,message:e})})))}var R=a(35),I=a.n(R);function U(){var e=Object(n.useContext)(N).State,t=e.userConnectedSocket,a=e.userConnected,c=Object(n.useState)(""),s=Object(b.a)(c,2),o=s[0],l=s[1];return r.a.createElement("div",{className:"sendMessage-container"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o&&t.emit("SEND_MESSAGE",{userConnected:a,message:o},(function(){return l("")}))}},r.a.createElement("input",{maxLength:"250",type:"text",placeholder:"Escribe un mensaje...",onChange:function(e){return l(e.target.value)},value:o}),r.a.createElement("button",{type:"submit"}," ",r.a.createElement(I.a,{style:{color:"#007AFE",background:"transparent",fontSize:45}})," ")))}var G=a(77),L=a.n(G),P=a(181),w=a(182);function W(e){var t=Object(n.useContext)(N),a=t.State,c=a.userConnected,s=a.userConnectedSocket;return r.a.createElement("div",{className:"user-connected-container"},r.a.createElement("h2",null,c),r.a.createElement(P.a,{title:"Desconectarse",placement:"left"},r.a.createElement(w.a,{onClick:function(){s.off(),t.Dispatch({type:f}),e.history.push("/Community")}},r.a.createElement(L.a,{style:{color:"#800000",margin:5}}))))}var V=a(78),z=a.n(V);function F(){var e=Object(n.useContext)(N),t=e.State,a=t.connectedUsers,c=t.userConnected,s=t.privateMessages,o="",l=a.filter((function(e){return e.user!==c})).map((function(t,a){var n=s&&s.filter((function(e){return e.sender===t.user&&!1===e.readed}));return o=n?n.length:"",r.a.createElement("p",{onClick:function(){return function(t,a){c!==t&&e.Dispatch({type:h,payload:{user:t,id:a}})}(t.user,t.id)},key:a},r.a.createElement("span",null," ",t.user," ")," ",0!==o&&r.a.createElement("span",{className:"notifications"}," ",o," "),"  ")}));return r.a.createElement("div",{className:"connected-users-container"},r.a.createElement("h2",null," ",r.a.createElement(z.a,{style:{marginTop:8,fontSize:70}})," "),l)}function H(e){var t=Object(n.useContext)(N),a=t.State,c=a.userConnected,s=a.userConnectedSocket,o=t.Dispatch;return Object(n.useEffect)((function(){var e={user:c,id:s.id};return s.emit("join",e),function(){s.emit("USER_LEAVE"),o({type:f}),s.off()}}),[s,c,o]),Object(n.useEffect)((function(){s.on("CONNECTED_USERS",(function(e){o({type:p,payload:e})})),s.on("NEW_USER",(function(e){o({type:v,payload:e})})),s.on("WELCOME",(function(e){o({type:v,payload:e})})),s.on("USER_DISCONNECTED",(function(e){o({type:v,payload:e})})),s.on("NEW_PRIVATE_MESSAGE",(function(e){var t=e.sender,a=e.receiver,n=e.idSender,r=e.idReceiver,c=e.message,s=e.createdAt,l=e.readed;o({type:S,payload:{sender:t,receiver:a,idSender:n,idReceiver:r,message:c,createdAt:s,readed:l}})}))}),[s,o]),r.a.createElement("div",{className:"chat-container"},r.a.createElement("div",{className:"chat-userlist-container"},r.a.createElement(F,null)),r.a.createElement("div",{className:"chat-title-container"},r.a.createElement(W,{history:e.history})),r.a.createElement(T,null),r.a.createElement("div",{className:"send-message-container"},r.a.createElement(U,null)))}var B=a(79),J=a.n(B),q=a(180),K="https://reactchatapp120.herokuapp.com/";var Y=function(){var e=Object(n.useContext)(N),t=e.State.userConnectedSocket,a=e.Dispatch,c=Object(n.useState)(""),s=Object(b.a)(c,2),o=s[0],l=s[1],i=Object(n.useState)(""),u=Object(b.a)(i,2),E=u[0],p=u[1],v=Object(n.useState)(!1),f=Object(b.a)(v,2),h=f[0],S=f[1];Object(n.useEffect)((function(){!function(){var e=J()(K);e.on("connection",(function(){console.log("connected")})),a({type:d,payload:e})}()}),[a]);var C=function(t){t.isUser?(p("Lo sentimos, el nombre ya ha sido tomado. Por favor, intenta con otro"),S(!1)):(p(""),S(!1),e.Dispatch({type:m,payload:o}))};return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",null,r.a.createElement("h3",null,"Debes conectarte para poder Ingresar a la sala"),r.a.createElement("form",{onSubmit:function(e){S(!0),e.preventDefault(),t.emit("VERIFY_USER",o,C)}},r.a.createElement("input",{minLength:"4",maxLength:"15",required:!0,type:"text",placeholder:"Ingresa tu nombre...",onChange:function(e){l(e.target.value)},value:o}),E&&r.a.createElement("p",null," ",E," "),r.a.createElement("button",{disabled:h,type:"submit"}," ",r.a.createElement("span",null,"Ingresar ")," ",r.a.createElement("span",null,h&&r.a.createElement(q.a,{style:{background:"transparent",margin:5},size:20}))," "))))};function $(e){var t=Object(n.useContext)(N).State.privateMessages,a=e.id;return r.a.createElement(u.a,{className:"messages-container"},t.filter((function(e){return e.idReceiver===a||e.idSender===a})).map((function(e,t){return r.a.createElement(M,{key:t,message:e})})))}function Q(e){var t=e.user,a=e.id,c=Object(n.useContext)(N).State,s=c.userConnectedSocket,o=c.userConnected,l=Object(n.useState)(""),i=Object(b.a)(l,2),u=i[0],m=i[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"sendMessage-container"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u&&s.emit("SEND_PRIVATE_MESSAGE",{user:t,message:u,id:a,userConnected:o},(function(){return m("")}))}},r.a.createElement("input",{maxLength:"250",type:"text",placeholder:"Escribe un mensaje...",onChange:function(e){return m(e.target.value)},value:u}),r.a.createElement("button",{type:"submit"}," ",r.a.createElement(I.a,{style:{color:"#007AFE",background:"transparent",fontSize:45}})," "))))}var X=a(80),Z=a.n(X);function ee(e){var t=Object(n.useContext)(N),a=t.Dispatch,c=t.State.privateMessages,s=e.chat,o=s.user,l=s.id;Object(n.useEffect)((function(){var t=e.chat.user;a({type:C,payload:t})}),[c,a,e.chat]);return r.a.createElement("div",{className:"private-chat-container"},r.a.createElement("div",{className:"user-connected-container"},r.a.createElement("h4",null," ",o," "),r.a.createElement("button",{onClick:function(){a({type:y,payload:{user:o,id:l}})}}," ",r.a.createElement(Z.a,{style:{color:"#800000",margin:5}})," ")),r.a.createElement($,{user:o,id:l}),r.a.createElement(Q,{user:o,id:l}))}function te(){var e=Object(n.useContext)(N).State.privateChats;return r.a.createElement("div",{className:"PrivateChats-grid"},e.map((function(e,t){return r.a.createElement(ee,{key:t,chat:e})})))}var ae=function(e){var t=Object(n.useContext)(N).State.userConnected;return r.a.createElement("div",{className:"layout-container"},t?r.a.createElement("div",{className:"login-chats-container"},r.a.createElement("div",{className:"layout-chat-container"}," ",r.a.createElement(H,{history:e.history}),"  "),r.a.createElement("div",{className:"layout-PrivateChats-container"},"  ",r.a.createElement(te,null)," ")):r.a.createElement(Y,null))};var ne=function(e){return r.a.createElement("div",{className:"homepage-container"},r.a.createElement("div",null,r.a.createElement("h1",null," Dev Community  "),r.a.createElement("h4",null," Chatea con otros desarrolladores! "),r.a.createElement("button",{onClick:function(){e.history.push("/Community")}}," Empezar ")))};var re=function(){return r.a.createElement(o.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:ne}),r.a.createElement(l.a,{exact:!0,path:"/Community",component:ae})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(159);s.a.render(r.a.createElement((function(e){var t=Object(n.useReducer)(j,_),a=Object(b.a)(t,2),c=a[0],s=a[1];return r.a.createElement(N.Provider,{value:{State:c,Dispatch:s}},e.children)}),null," ",r.a.createElement(re,null)," "),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},85:function(e,t,a){e.exports=a(160)}},[[85,1,2]]]);
//# sourceMappingURL=main.228c336a.chunk.js.map